<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ç„¡æ–™ã®JSONæ•´å½¢ãƒ»æ¤œè¨¼ãƒ„ãƒ¼ãƒ«ã€‚JSONã‚’è¦‹ã‚„ã™ããƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯ã€åœ§ç¸®æ©Ÿèƒ½ã‚‚æ­è¼‰ã€‚é–‹ç™ºè€…å¿…é ˆã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã€‚">
    <meta name="keywords" content="JSONæ•´å½¢,JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ,JSONæ¤œè¨¼,JSONãƒãƒªãƒ‡ãƒ¼ã‚¿ãƒ¼,JSONåœ§ç¸®,ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="JSONæ•´å½¢ãƒ„ãƒ¼ãƒ« - WebToolBox">
    <meta property="og:description" content="JSONãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚„ã™ãæ•´å½¢ãƒ»æ¤œè¨¼ã€‚åœ§ç¸®æ©Ÿèƒ½ã‚‚æ­è¼‰ã€‚é–‹ç™ºè€…å¿…é ˆã®ç„¡æ–™ãƒ„ãƒ¼ãƒ«ã€‚">
    <link rel="canonical" href="https://webtoolbox.example.com/tools/json-formatter.html">
    <title>JSONæ•´å½¢ãƒ„ãƒ¼ãƒ« | ç„¡æ–™ã‚ªãƒ³ãƒ©ã‚¤ãƒ³JSONãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ - WebToolBox</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‹</text></svg>">
    <style>
        .json-editor {
            font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
            font-size: 14px;
            line-height: 1.5;
            tab-size: 2;
        }
        .error-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 12px;
            display: none;
        }
        .error-message.show {
            display: block;
        }
        .success-message {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #16a34a;
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 12px;
            display: none;
        }
        .success-message.show {
            display: block;
        }
        .indent-options {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }
        .indent-btn {
            padding: 8px 16px;
            border: 2px solid var(--gray-200);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }
        .indent-btn.active {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }
        .json-stats {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            margin-top: 16px;
            font-size: 14px;
            color: var(--gray-600);
        }
        .json-stat {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .json-stat strong {
            color: var(--primary);
        }
    </style>
</head>
<body class="tool-page">
    <!-- Header -->
    <header class="site-header">
        <div class="header-content">
            <a href="../" class="logo">
                <span class="logo-icon">ğŸ§°</span>
                <span>WebToolBox</span>
            </a>
            <nav>
                <ul class="nav-links">
                    <li><a href="../">ãƒ„ãƒ¼ãƒ«ä¸€è¦§</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Tool Header -->
    <section class="tool-header">
        <h1>ğŸ“‹ JSONæ•´å½¢ãƒ„ãƒ¼ãƒ«</h1>
        <p>JSONãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚„ã™ãæ•´å½¢ãƒ»æ¤œè¨¼ãƒ»åœ§ç¸®</p>
    </section>

    <!-- Main Content -->
    <main class="tool-content">
        <div class="tool-main">
            <!-- Input Area -->
            <div class="form-group">
                <label class="form-label" for="jsonInput">JSONã‚’å…¥åŠ›</label>
                <textarea 
                    id="jsonInput" 
                    class="form-textarea json-editor" 
                    placeholder='{"key": "value", "array": [1, 2, 3]}'
                    style="min-height: 200px;"
                ></textarea>
                <div id="errorMessage" class="error-message"></div>
                <div id="successMessage" class="success-message"></div>
            </div>

            <!-- Options -->
            <div class="form-group">
                <label class="form-label">ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ</label>
                <div class="indent-options">
                    <button class="indent-btn" data-indent="2" onclick="setIndent(2)">2ã‚¹ãƒšãƒ¼ã‚¹</button>
                    <button class="indent-btn active" data-indent="4" onclick="setIndent(4)">4ã‚¹ãƒšãƒ¼ã‚¹</button>
                    <button class="indent-btn" data-indent="tab" onclick="setIndent('tab')">ã‚¿ãƒ–</button>
                </div>
            </div>

            <!-- Buttons -->
            <div class="btn-group">
                <button class="btn btn-primary" onclick="formatJSON()">
                    âœ¨ æ•´å½¢ã™ã‚‹
                </button>
                <button class="btn btn-secondary" onclick="minifyJSON()">
                    ğŸ“¦ åœ§ç¸®ã™ã‚‹
                </button>
                <button class="btn btn-secondary" onclick="validateJSON()">
                    âœ… æ¤œè¨¼ã®ã¿
                </button>
            </div>

            <!-- Output Area -->
            <div class="form-group" style="margin-top: 24px;">
                <label class="form-label" for="jsonOutput">å‡ºåŠ›çµæœ</label>
                <div class="code-block" style="position: relative;">
                    <button class="copy-btn" onclick="copyOutput()">ã‚³ãƒ”ãƒ¼</button>
                    <pre id="jsonOutput" style="min-height: 150px; margin: 0;"></pre>
                </div>
                <div class="json-stats" id="jsonStats"></div>
            </div>

            <!-- Additional Buttons -->
            <div class="btn-group" style="margin-top: 16px;">
                <button class="btn btn-secondary" onclick="clearAll()">
                    ğŸ—‘ï¸ ã‚¯ãƒªã‚¢
                </button>
                <button class="btn btn-success" onclick="downloadJSON()">
                    ğŸ’¾ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                </button>
            </div>
        </div>

        <!-- Ad Space -->
        <div class="ad-container horizontal">
            <span>åºƒå‘Šã‚¹ãƒšãƒ¼ã‚¹ (728x90)</span>
        </div>

        <!-- Info Section -->
        <div class="info-box">
            <h2>JSONæ•´å½¢ãƒ„ãƒ¼ãƒ«ã®ä½¿ã„æ–¹</h2>
            <p>ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€JSONãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚„ã™ãæ•´å½¢ã—ãŸã‚Šã€æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯ã—ãŸã‚Šã§ãã¾ã™ã€‚</p>
            <ul>
                <li><strong>æ•´å½¢ã™ã‚‹</strong> - JSONã‚’èª­ã¿ã‚„ã™ã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›</li>
                <li><strong>åœ§ç¸®ã™ã‚‹</strong> - ä¸è¦ãªç©ºç™½ã‚’å‰Šé™¤ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚’å‰Šæ¸›</li>
                <li><strong>æ¤œè¨¼ã®ã¿</strong> - JSONã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚’ãƒã‚§ãƒƒã‚¯</li>
            </ul>
        </div>

        <!-- Tips -->
        <div class="info-box">
            <h2>ã‚ˆãã‚ã‚‹JSONæ§‹æ–‡ã‚¨ãƒ©ãƒ¼</h2>
            <ul>
                <li>ã‚­ãƒ¼ãŒãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã¾ã‚Œã¦ã„ãªã„</li>
                <li>æœ«å°¾ã®ã‚«ãƒ³ãƒï¼ˆtrailing commaï¼‰</li>
                <li>ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã®ä½¿ç”¨ï¼ˆãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆãŒå¿…è¦ï¼‰</li>
                <li>ã‚³ãƒ¡ãƒ³ãƒˆã®è¨˜è¿°ï¼ˆJSONã¯ã‚³ãƒ¡ãƒ³ãƒˆéå¯¾å¿œï¼‰</li>
                <li>æ•°å€¤ãŒ0ã§å§‹ã¾ã£ã¦ã„ã‚‹ï¼ˆ0x, 0oãªã©ï¼‰</li>
            </ul>
        </div>

        <!-- Sample -->
        <div class="info-box">
            <h2>ã‚µãƒ³ãƒ—ãƒ«JSON</h2>
            <button class="btn btn-secondary" onclick="loadSample()" style="margin-bottom: 16px;">
                ã‚µãƒ³ãƒ—ãƒ«ã‚’èª­ã¿è¾¼ã‚€
            </button>
            <pre style="background: var(--gray-100); padding: 16px; border-radius: 8px; overflow: auto; font-size: 13px;">{
  "name": "WebToolBox",
  "version": "1.0.0",
  "tools": ["JSONæ•´å½¢", "æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ", "QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ"],
  "features": {
    "free": true,
    "noRegistration": true
  }
}</pre>
        </div>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="../">ãƒ›ãƒ¼ãƒ </a>
                <a href="../#tools">ãƒ„ãƒ¼ãƒ«ä¸€è¦§</a>
            </div>
            <p class="copyright">&copy; 2024 WebToolBox. All rights reserved.</p>
        </div>
    </footer>

    <script src="../js/common.js"></script>
    <script>
        let indentSize = 4;
        let indentChar = ' ';

        const jsonInput = document.getElementById('jsonInput');
        const jsonOutput = document.getElementById('jsonOutput');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const jsonStats = document.getElementById('jsonStats');

        // ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆè¨­å®š
        function setIndent(value) {
            document.querySelectorAll('.indent-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-indent="${value}"]`).classList.add('active');
            
            if (value === 'tab') {
                indentSize = 1;
                indentChar = '\t';
            } else {
                indentSize = value;
                indentChar = ' ';
            }
        }

        // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
        function showError(msg) {
            errorMessage.textContent = 'âŒ ' + msg;
            errorMessage.classList.add('show');
            successMessage.classList.remove('show');
        }

        function showSuccess(msg) {
            successMessage.textContent = 'âœ… ' + msg;
            successMessage.classList.add('show');
            errorMessage.classList.remove('show');
        }

        function hideMessages() {
            errorMessage.classList.remove('show');
            successMessage.classList.remove('show');
        }

        // JSONçµ±è¨ˆ
        function updateStats(obj) {
            const stats = analyzeJSON(obj);
            jsonStats.innerHTML = `
                <span class="json-stat">ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ: <strong>${stats.objects}</strong></span>
                <span class="json-stat">é…åˆ—: <strong>${stats.arrays}</strong></span>
                <span class="json-stat">ã‚­ãƒ¼: <strong>${stats.keys}</strong></span>
                <span class="json-stat">æ·±ã•: <strong>${stats.depth}</strong></span>
            `;
        }

        function analyzeJSON(obj, depth = 1) {
            let stats = { objects: 0, arrays: 0, keys: 0, depth: depth };
            
            if (Array.isArray(obj)) {
                stats.arrays = 1;
                obj.forEach(item => {
                    if (typeof item === 'object' && item !== null) {
                        const sub = analyzeJSON(item, depth + 1);
                        stats.objects += sub.objects;
                        stats.arrays += sub.arrays;
                        stats.keys += sub.keys;
                        stats.depth = Math.max(stats.depth, sub.depth);
                    }
                });
            } else if (typeof obj === 'object' && obj !== null) {
                stats.objects = 1;
                stats.keys = Object.keys(obj).length;
                Object.values(obj).forEach(value => {
                    if (typeof value === 'object' && value !== null) {
                        const sub = analyzeJSON(value, depth + 1);
                        stats.objects += sub.objects;
                        stats.arrays += sub.arrays;
                        stats.keys += sub.keys;
                        stats.depth = Math.max(stats.depth, sub.depth);
                    }
                });
            }
            
            return stats;
        }

        // æ•´å½¢
        function formatJSON() {
            const input = jsonInput.value.trim();
            if (!input) {
                showError('JSONã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            try {
                const parsed = JSON.parse(input);
                const indent = indentChar.repeat(indentSize);
                const formatted = JSON.stringify(parsed, null, indent);
                jsonOutput.textContent = formatted;
                updateStats(parsed);
                showSuccess('JSONã‚’æ•´å½¢ã—ã¾ã—ãŸ');
            } catch (e) {
                showError('æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ' + e.message);
                jsonOutput.textContent = '';
                jsonStats.innerHTML = '';
            }
        }

        // åœ§ç¸®
        function minifyJSON() {
            const input = jsonInput.value.trim();
            if (!input) {
                showError('JSONã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            try {
                const parsed = JSON.parse(input);
                const minified = JSON.stringify(parsed);
                jsonOutput.textContent = minified;
                updateStats(parsed);
                
                const originalSize = new Blob([input]).size;
                const minifiedSize = new Blob([minified]).size;
                const reduction = ((1 - minifiedSize / originalSize) * 100).toFixed(1);
                
                showSuccess(`JSONã‚’åœ§ç¸®ã—ã¾ã—ãŸï¼ˆ${reduction}% å‰Šæ¸›ï¼‰`);
            } catch (e) {
                showError('æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ' + e.message);
                jsonOutput.textContent = '';
                jsonStats.innerHTML = '';
            }
        }

        // æ¤œè¨¼
        function validateJSON() {
            const input = jsonInput.value.trim();
            if (!input) {
                showError('JSONã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            try {
                const parsed = JSON.parse(input);
                updateStats(parsed);
                showSuccess('æœ‰åŠ¹ãªJSONã§ã™');
            } catch (e) {
                showError('æ§‹æ–‡ã‚¨ãƒ©ãƒ¼: ' + e.message);
                jsonStats.innerHTML = '';
            }
        }

        // ã‚¯ãƒªã‚¢
        function clearAll() {
            jsonInput.value = '';
            jsonOutput.textContent = '';
            jsonStats.innerHTML = '';
            hideMessages();
            jsonInput.focus();
        }

        // ã‚³ãƒ”ãƒ¼
        function copyOutput() {
            const text = jsonOutput.textContent;
            if (text) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
                });
            }
        }

        // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
        function downloadJSON() {
            const text = jsonOutput.textContent;
            if (text) {
                downloadFile(text, 'formatted.json', 'application/json');
                showToast('ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ');
            }
        }

        // ã‚µãƒ³ãƒ—ãƒ«èª­ã¿è¾¼ã¿
        function loadSample() {
            jsonInput.value = `{
  "name": "WebToolBox",
  "version": "1.0.0",
  "description": "ç„¡æ–™ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«é›†",
  "tools": [
    "æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆ",
    "JSONæ•´å½¢",
    "QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆ",
    "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”Ÿæˆ"
  ],
  "features": {
    "free": true,
    "noRegistration": true,
    "privacyFriendly": true
  },
  "stats": {
    "users": 10000,
    "rating": 4.8
  }
}`;
            hideMessages();
        }

        // å…¥åŠ›æ™‚ã«è‡ªå‹•æ¤œè¨¼
        jsonInput.addEventListener('input', debounce(() => {
            if (jsonInput.value.trim()) {
                try {
                    JSON.parse(jsonInput.value);
                    hideMessages();
                } catch (e) {
                    // å…¥åŠ›ä¸­ã¯ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã—ãªã„
                }
            }
        }, 500));
    </script>
</body>
</html>
